services:
  strava-stats-app:
    image: strava-stats
    container_name: strava-stats-app
    restart: unless-stopped
    ports:
      - "8000:8050"
    volumes:
      - strava-stats-data:/app/strava_stats/data

  strava-stats-sync:
    image: strava-stats
    container_name: strava-stats-sync
    working_dir: /app
    command: ["python", "-m", "strava_stats.scripts.sync_strava_activities"]
    depends_on:
      - strava-stats-app
    volumes:
      - strava-stats-data:/app/strava_stats/data

#  strava-stats-debug:
#    image: strava-stats
#    container_name: strava-stats-debug
#    working_dir: /app
#    tty: true
#    stdin_open: true
#    volumes:
#      - strava-stats-data:/app/strava_stats/data
#    entrypoint: /bin/bash
#    depends_on:
#      - strava-stats-app

volumes:
  strava-stats-data:
